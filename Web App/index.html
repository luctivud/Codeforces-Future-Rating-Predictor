<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CF Rating Predictor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" integrity="undefined" crossorigin="anonymous">
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="undefined" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="undefined" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.esm.min.js" integrity="undefined" crossorigin="anonymous"></script> -->
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script> <!-- codeforces icon-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Balthazar&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="magic.css/dist/magic.css">
    <style>
        body {
            font-family: 'Montserrat';
            font-size: 1rem;
        }
        .bg-grayish {
            background-color: #101010;
            color: white;
        }
        .navbar-brand {
            font-family: 'Balthazar', serif;
            font-size: 2.4rem;
        }
        .tapered {
            background-image: linear-gradient(179deg,rgb(254, 97, 158) 0%, rgb(254, 97, 158) 50%,transparent 54%, transparent 100%);
        }

        .tapered2 {
            background-image: linear-gradient(181deg, #ffa620 0%, #fba11a 50%, transparent 54%, transparent 100%);
        }
        nav {
            margin-bottom: 3.5rem;
        }
        nav a {
            background-size: 100% 15%;
            background-repeat: repeat-x;
            background-position: left 0% bottom 10%;
        }
    </style>
</head>

    
<body class="bg-grayish">
    <!-- Header for page here -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-grayish">
        <a class="navbar-brand mx-auto tapered2" href="#"> <span class="iconify" data-icon="simple-icons:codeforces" data-inline="false"></span> CodeForces Future Rating Predictor </a>
    </nav>
    
    <!-- / Header for page here -->
    <!-- User enter details here -->
    <div class="container-fluid bg-grayish">
        <div class="row d-flex">
            <div class="col-md-12 mx-auto bg-grayish">
                <form>
                    <div class="form-group col-md-4 mx-auto pb-2">
                        <label for="max-rating">Enter your max and current ratings</label>
                        <input type="text" class="form-control mb-2" id="curr-rating" placeholder="Current Rating">
                        <input type="text" class="form-control mb-2" id="max-rating" placeholder="Max Rating">
                    </div>
                    <div class="form-group col-md-4 mx-auto pb-4">
                        <label for="delta-1">Enter deltas from past 3 rounds</label>
                        <div class="row">
                            <div class="col-md-4">
                                <input type="text" class="form-control" name = "delta-arr" id="delta-1" placeholder="Delta 1">
                            </div>
                            <div class="col-md-4">
                                <input type="text" class="form-control" name = "delta-arr" id="delta-2" placeholder="Delta 2">
                            </div>
                            <div class="col-md-4">                            
                                <input type="text" class="form-control" name = "delta-arr" id="delta-3" placeholder="Delta 3">
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-4 mx-auto pb-4">
                        <label for="lucky-number">Enter your lucky number</label>
                        <input type="text" class="form-control" id="lucky-number" placeholder="Lucky Number">
                    </div>
                    <div type = "button" class="btn btn-primary col-md-4 d-flex mx-auto justify-content-center mb-2" onclick="getPredictedRatings()">Predict Ratings</div>
                    <div class="col-md-4 mx-auto pb-2 text-center magictime puffIn" id = "warning-generated"> 12 </div>
                    <div class="col-md-4 mx-auto pb-2 justify-content-center" id = "predicted-ratings"> </div>
                    <div class="col-md-4 mx-auto pb-2 justify-content-center" id = "challenge-problem"> </div>
                </form>
            </div>
        </div>
    </div>
    <!-- / User enter details here -->
    <!-- Footer for page here -->

    <!-- / Footer for page here -->
</body>
<script>
    const SEED_ACCEPTANCE_LT = 10;
    const MULT_ACCEPTANCE_LT = 301;
    const COUNT_PREV_CONTEST_DELTA = 3;
    const MULTIPLIER = 10;
    const UPP_LIM_FOR_MUL = 1000;
    const MAX_RATING_SO_FAR = 3797;
    const MY_FAV_REDUCING_AGENT = -3;

    // 12
    const title_on_rating = [
        "Undated",
        "Noobie", 
        "Puppy-lil", "Spicy-list", "Eggs-puff",
        "Candyman-Disaster", "Maatsaab", "Entertainment-Mstrbator", 
        "Grandma's Sister", "Indigenous Gangbastad", "Legendary Grandma",
        "Insanity"
    ];

    const ratings_list = [
        1, 
        1200, 1400, 1600, 
        1900, 2100, 2300, 
        2400, 2600, 3000, MAX_RATING_SO_FAR+1, 
        10000
    ];

    function warn(message) {

    }

    function generate_error(message) {

    }

    function validate_input(maxRating, currRating, prev_rating_deltas) {

    }

    function normalize_deltas(prev_rating_deltas) {
        var rainboy_flag = false;
        for (var i = 0; i < COUNT_PREV_CONTEST_DELTA; i++) {
            rainboy_flag |= (Math.abs(prev_rating_deltas[i]) >= 111);
        }

        if (rainboy_flag) warn("\"rainboy delta is detected\"\n");

        prev_rating_deltas.sort();

        if (prev_rating_deltas[0] > 0) {
            prev_rating_deltas[0] = - prev_rating_deltas[0];
        }
        if (prev_rating_deltas[COUNT_PREV_CONTEST_DELTA-1] < 0) {
            prev_rating_deltas[COUNT_PREV_CONTEST_DELTA-1] = - prev_rating_deltas[COUNT_PREV_CONTEST_DELTA-1];
        }
        return prev_rating_deltas;
    }


    function PredictRatings(maxRating, currRating, prev_rating_deltas, luckyNumber) {
        var predictedRating = maxRating;
        validate_input(maxRating, currRating, prev_rating_deltas);
        prev_rating_deltas = normalize_deltas(prev_rating_deltas);

        return predictedRating;
    }   

    function getPredictedRatings() {
        var maxRating = parseInt(document.getElementById("max-rating").value);
        var currRating = parseInt(document.getElementById("curr-rating").value);
        var delta_array_obj = document.getElementsByName("delta-arr");
        var luckyNumber = parseInt(document.getElementById("lucky-number").value);
        var prev_rating_deltas = []
        for (var i = 0; i < delta_array_obj.length; i++) {
            prev_rating_deltas.push(parseInt(delta_array_obj[i].value));
        }
        
        console.log(prev_rating_deltas);
        console.log(maxRating);
        console.log(currRating + maxRating);
        
        var predictedRating = PredictRatings(maxRating, currRating, prev_rating_deltas, luckyNumber);
        
        document.getElementById("predicted-ratings").innerHTML = predictedRating; // "ok tested";
    }
    
    // var selector = document.getElementById("warning-generated");
    // console.log(selector)
    // selector.classList.add('magictime', 'puffIn');
</script>
</html>
